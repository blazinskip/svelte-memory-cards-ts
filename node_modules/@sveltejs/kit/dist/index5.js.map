{"version":3,"file":"index5.js","sources":["../src/api/adapt/prerender.js","../src/api/adapt/Builder.js","../src/api/adapt/index.js"],"sourcesContent":["import fs from 'fs';\nimport { dirname, resolve as resolve_path } from 'path';\nimport { parse, resolve, URLSearchParams } from 'url';\nimport { mkdirp } from '@sveltejs/app-utils/files';\n\nfunction clean_html(html) {\n\treturn html\n\t\t.replace(/<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/gm, '')\n\t\t.replace(/(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gm, '$1</' + 'script>')\n\t\t.replace(/(<style[\\s\\S]*?>)[\\s\\S]*?<\\/style>/gm, '$1</' + 'style>')\n\t\t.replace(/<!--[\\s\\S]*?-->/gm, '');\n}\n\nfunction get_href(attrs) {\n\tconst match = /href\\s*=\\s*(?:\"(.*?)\"|'(.*?)'|([^\\s>]*))/.exec(attrs);\n\treturn match && (match[1] || match[2] || match[3]);\n}\n\nfunction get_src(attrs) {\n\tconst match = /src\\s*=\\s*(?:\"(.*?)\"|'(.*?)'|([^\\s>]*))/.exec(attrs);\n\treturn match && (match[1] || match[2] || match[3]);\n}\n\nfunction get_srcset_urls(attrs) {\n\tconst results = [];\n\t// Note that the srcset allows any ASCII whitespace, including newlines.\n\tconst match = /srcset\\s*=\\s*(?:\"(.*?)\"|'(.*?)'|([^\\s>]*))/s.exec(attrs);\n\tif (match) {\n\t\tconst attr_content = match[1] || match[2] || match[3];\n\t\t// Parse the content of the srcset attribute.\n\t\t// The regexp is modelled after the srcset specs (https://html.spec.whatwg.org/multipage/images.html#srcset-attribute)\n\t\t// and should cover most reasonable cases.\n\t\tconst regex = /\\s*([^\\s,]\\S+[^\\s,])\\s*((?:\\d+w)|(?:-?\\d+(?:\\.\\d+)?(?:[eE]-?\\d+)?x))?/gm;\n\t\tlet sub_matches;\n\t\twhile ((sub_matches = regex.exec(attr_content))) {\n\t\t\tresults.push(sub_matches[1]);\n\t\t}\n\t}\n\treturn results;\n}\n\nconst OK = 2;\nconst REDIRECT = 3;\n\nexport async function prerender({\n\tdir,\n\tout,\n\tmanifest,\n\tlog,\n\tforce\n}) {\n\tconst seen = new Set();\n\n\tconst server_root = resolve_path(dir);\n\tconst app = require(`${server_root}/server/app.js`);\n\n\tasync function crawl(path) {\n\t\tif (seen.has(path)) return;\n\t\tseen.add(path);\n\n\t\tconst rendered = await app.render({\n\t\t\thost: null, // TODO ???\n\t\t\tmethod: 'GET',\n\t\t\theaders: {},\n\t\t\tpath,\n\t\t\tbody: null,\n\t\t\tquery: new URLSearchParams()\n\t\t}, {\n\t\t\tonly_prerender: !force\n\t\t});\n\n\t\tif (rendered) {\n\t\t\tconst response_type = Math.floor(rendered.status / 100);\n\t\t\tconst headers = rendered.headers;\n\t\t\tconst type = headers && headers['content-type'];\n\t\t\tconst is_html = response_type === REDIRECT || type === 'text/html';\n\n\t\t\tconst parts = path.split('/');\n\t\t\tif (is_html && parts[parts.length - 1] !== 'index.html') {\n\t\t\t\tparts.push('index.html');\n\t\t\t}\n\n\t\t\tconst file = `${out}${parts.join('/')}`;\n\t\t\tmkdirp(dirname(file));\n\n\t\t\tif (response_type === REDIRECT) {\n\t\t\t\tconst location = headers['location'];\n\n\t\t\t\tlog.warn(`${rendered.status} ${path} -> ${location}`);\n\t\t\t\tfs.writeFileSync(\n\t\t\t\t\tfile,\n\t\t\t\t\t`<script>window.location.href=${JSON.stringify(headers['location'])}</script>`\n\t\t\t\t);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response_type === OK) {\n\t\t\t\tlog.info(`${rendered.status} ${path}`);\n\t\t\t\tfs.writeFileSync(file, rendered.body); // TODO minify where possible?\n\t\t\t} else {\n\t\t\t\t// TODO should this fail the build?\n\t\t\t\tlog.error(`${rendered.status} ${path}`);\n\t\t\t}\n\n\t\t\tconst { dependencies } = rendered;\n\n\t\t\tif (dependencies) {\n\t\t\t\tfor (const path in dependencies) {\n\t\t\t\t\tconst result = dependencies[path];\n\t\t\t\t\tconst response_type = Math.floor(result.status / 100);\n\n\t\t\t\t\tconst is_html = result.headers['content-type'] === 'text/html';\n\n\t\t\t\t\tconst parts = path.split('/');\n\t\t\t\t\tif (is_html && parts[parts.length - 1] !== 'index.html') {\n\t\t\t\t\t\tparts.push('index.html');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst file = `${out}${parts.join('/')}`;\n\t\t\t\t\tmkdirp(dirname(file));\n\n\t\t\t\t\tfs.writeFileSync(file, result.body);\n\n\t\t\t\t\tif (response_type === OK) {\n\t\t\t\t\t\tlog.info(`${result.status} ${path}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlog.error(`${result.status} ${path}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (is_html) {\n\t\t\t\tconst cleaned = clean_html(rendered.body);\n\n\t\t\t\tlet match;\n\t\t\t\tconst pattern = /<(a|img|link|source)\\s+([\\s\\S]+?)>/gm;\n\n\t\t\t\twhile ((match = pattern.exec(cleaned))) {\n\t\t\t\t\tlet hrefs = [];\n\t\t\t\t\tconst element = match[1];\n\t\t\t\t\tconst attrs = match[2];\n\n\t\t\t\t\tif (element === 'a' || element === 'link') {\n\t\t\t\t\t\threfs.push(get_href(attrs));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (element === 'img') {\n\t\t\t\t\t\t\threfs.push(get_src(attrs));\n\t\t\t\t\t\t}\n\t\t\t\t\t\threfs.push(...get_srcset_urls(attrs));\n\t\t\t\t\t}\n\n\t\t\t\t\threfs = hrefs.filter(Boolean);\n\n\t\t\t\t\tfor (const href of hrefs) {\n\t\t\t\t\t\tconst resolved = resolve(path, href);\n\t\t\t\t\t\tif (resolved[0] !== '/') continue;\n\n\t\t\t\t\t\tconst parsed = parse(resolved);\n\n\t\t\t\t\t\tconst parts = parsed.pathname.slice(1).split('/').filter(Boolean);\n\t\t\t\t\t\tif (parts[parts.length - 1] === 'index.html') parts.pop();\n\n\t\t\t\t\t\tconst file_exists =\n\t\t\t\t\t\t\t(parsed.pathname.startsWith('/_app/') && fs.existsSync(`${dir}/client/${parsed.pathname}`)) ||\n\t\t\t\t\t\t\tfs.existsSync(`${out}${parsed.pathname}`) ||\n\t\t\t\t\t\t\tfs.existsSync(`static${parsed.pathname}`) ||\n\t\t\t\t\t\t\tfs.existsSync(`static${parsed.pathname}/index.html`);\n\n\t\t\t\t\t\tif (file_exists) continue;\n\n\t\t\t\t\t\tif (parsed.query) {\n\t\t\t\t\t\t\t// TODO warn that query strings have no effect on statically-exported pages\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tawait crawl(parsed.pathname);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst entries = manifest.pages.map((page) => page.path).filter(Boolean);\n\n\tfor (const entry of entries) {\n\t\tawait crawl(entry);\n\t}\n}\n","import { copy } from '@sveltejs/app-utils/files';\nimport { prerender } from './prerender';\n\nexport default class Builder {\n\t#generated_files;\n\t#static_files;\n\t#manifest;\n\n\tconstructor({\n\t\tgenerated_files,\n\t\tstatic_files,\n\t\tlog,\n\t\tmanifest\n\t}) {\n\t\tthis.#generated_files = generated_files;\n\t\tthis.#static_files = static_files;\n\t\tthis.#manifest = manifest;\n\n\t\tthis.log = log;\n\t}\n\n\tcopy_client_files(dest) {\n\t\tcopy(`${this.#generated_files}/client`, dest, (file) => file[0] !== '.');\n\t}\n\n\tcopy_server_files(dest) {\n\t\tcopy(`${this.#generated_files}/server`, dest, (file) => file[0] !== '.');\n\t}\n\n\tcopy_static_files(dest) {\n\t\tcopy(this.#static_files, dest);\n\t}\n\n\tasync prerender({\n\t\tforce = false,\n\t\tdest\n\t}) {\n\t\tawait prerender({\n\t\t\tout: dest,\n\t\t\tforce,\n\t\t\tdir: this.#generated_files,\n\t\t\tmanifest: this.#manifest,\n\t\t\tlog: this.log\n\t\t});\n\t}\n}\n","import { existsSync } from 'fs';\nimport colors from 'kleur';\nimport { resolve } from 'path';\nimport relative from 'require-relative';\nimport { logger } from '../utils';\nimport Builder from './Builder';\n\nexport async function adapt(config) {\n\tif (!config.adapter) {\n\t\tthrow new Error('No adapter specified');\n\t}\n\n\tif (typeof config.adapter !== 'string') {\n\t\t// TODO\n\t\tthrow new Error('Adapter must be a string');\n\t}\n\n\tconst log = logger();\n\n\tconsole.log(colors.bold().cyan(`\\n> Using ${config.adapter}`));\n\n\tconst manifest_file = resolve('.svelte/build/manifest.cjs');\n\n\tif (!existsSync(manifest_file)) {\n\t\tthrow new Error('Could not find manifest file. Have you run `svelte-kit build`?');\n\t}\n\n\tconst manifest = require(manifest_file);\n\n\tconst builder = new Builder({\n\t\tgenerated_files: '.svelte/build/optimized',\n\t\tstatic_files: config.paths.static,\n\t\tmanifest,\n\t\tlog\n\t});\n\n\tconst adapter = relative(config.adapter);\n\tawait adapter(builder);\n\n\tlog.success('done');\n}\n"],"names":["resolve_path","path","URLSearchParams","mkdirp","dirname","fs","resolve","parse","copy","logger","colors","existsSync","relative"],"mappings":";;;;;;;;;;;;;AAKA,SAAS,UAAU,CAAC,IAAI,EAAE;AAC1B,CAAC,OAAO,IAAI;AACZ,GAAG,OAAO,CAAC,4BAA4B,EAAE,EAAE,CAAC;AAC5C,GAAG,OAAO,CAAC,wCAAwC,EAAE,MAAM,GAAG,SAAS,CAAC;AACxE,GAAG,OAAO,CAAC,sCAAsC,EAAE,MAAM,GAAG,QAAQ,CAAC;AACrE,GAAG,OAAO,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;AACpC,CAAC;AACD;AACA,SAAS,QAAQ,CAAC,KAAK,EAAE;AACzB,CAAC,MAAM,KAAK,GAAG,0CAA0C,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACtE,CAAC,OAAO,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACpD,CAAC;AACD;AACA,SAAS,OAAO,CAAC,KAAK,EAAE;AACxB,CAAC,MAAM,KAAK,GAAG,yCAAyC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACrE,CAAC,OAAO,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACpD,CAAC;AACD;AACA,SAAS,eAAe,CAAC,KAAK,EAAE;AAChC,CAAC,MAAM,OAAO,GAAG,EAAE,CAAC;AACpB;AACA,CAAC,MAAM,KAAK,GAAG,6CAA6C,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACzE,CAAC,IAAI,KAAK,EAAE;AACZ,EAAE,MAAM,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;AACxD;AACA;AACA;AACA,EAAE,MAAM,KAAK,GAAG,yEAAyE,CAAC;AAC1F,EAAE,IAAI,WAAW,CAAC;AAClB,EAAE,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG;AACnD,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC,GAAG;AACH,EAAE;AACF,CAAC,OAAO,OAAO,CAAC;AAChB,CAAC;AACD;AACA,MAAM,EAAE,GAAG,CAAC,CAAC;AACb,MAAM,QAAQ,GAAG,CAAC,CAAC;AACnB;AACO,eAAe,SAAS,CAAC;AAChC,CAAC,GAAG;AACJ,CAAC,GAAG;AACJ,CAAC,QAAQ;AACT,CAAC,GAAG;AACJ,CAAC,KAAK;AACN,CAAC,EAAE;AACH,CAAC,MAAM,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;AACxB;AACA,CAAC,MAAM,WAAW,GAAGA,YAAY,CAAC,GAAG,CAAC,CAAC;AACvC,CAAC,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,EAAE,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC;AACrD;AACA,CAAC,eAAe,KAAK,CAACC,MAAI,EAAE;AAC5B,EAAE,IAAI,IAAI,CAAC,GAAG,CAACA,MAAI,CAAC,EAAE,OAAO;AAC7B,EAAE,IAAI,CAAC,GAAG,CAACA,MAAI,CAAC,CAAC;AACjB;AACA,EAAE,MAAM,QAAQ,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC;AACpC,GAAG,IAAI,EAAE,IAAI;AACb,GAAG,MAAM,EAAE,KAAK;AAChB,GAAG,OAAO,EAAE,EAAE;AACd,SAAGA,MAAI;AACP,GAAG,IAAI,EAAE,IAAI;AACb,GAAG,KAAK,EAAE,IAAIC,mBAAe,EAAE;AAC/B,GAAG,EAAE;AACL,GAAG,cAAc,EAAE,CAAC,KAAK;AACzB,GAAG,CAAC,CAAC;AACL;AACA,EAAE,IAAI,QAAQ,EAAE;AAChB,GAAG,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;AAC3D,GAAG,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;AACpC,GAAG,MAAM,IAAI,GAAG,OAAO,IAAI,OAAO,CAAC,cAAc,CAAC,CAAC;AACnD,GAAG,MAAM,OAAO,GAAG,aAAa,KAAK,QAAQ,IAAI,IAAI,KAAK,WAAW,CAAC;AACtE;AACA,GAAG,MAAM,KAAK,GAAGD,MAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACjC,GAAG,IAAI,OAAO,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,YAAY,EAAE;AAC5D,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC7B,IAAI;AACJ;AACA,GAAG,MAAM,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC3C,GAAGE,YAAM,CAACC,YAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AACzB;AACA,GAAG,IAAI,aAAa,KAAK,QAAQ,EAAE;AACnC,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACzC;AACA,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAEH,MAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC1D,IAAII,sBAAE,CAAC,aAAa;AACpB,KAAK,IAAI;AACT,KAAK,CAAC,6BAA6B,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC;AACnF,KAAK,CAAC;AACN;AACA,IAAI,OAAO;AACX,IAAI;AACJ;AACA,GAAG,IAAI,aAAa,KAAK,EAAE,EAAE;AAC7B,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAEJ,MAAI,CAAC,CAAC,CAAC,CAAC;AAC3C,IAAII,sBAAE,CAAC,aAAa,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;AAC1C,IAAI,MAAM;AACV;AACA,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAEJ,MAAI,CAAC,CAAC,CAAC,CAAC;AAC5C,IAAI;AACJ;AACA,GAAG,MAAM,EAAE,YAAY,EAAE,GAAG,QAAQ,CAAC;AACrC;AACA,GAAG,IAAI,YAAY,EAAE;AACrB,IAAI,KAAK,MAAMA,MAAI,IAAI,YAAY,EAAE;AACrC,KAAK,MAAM,MAAM,GAAG,YAAY,CAACA,MAAI,CAAC,CAAC;AACvC,KAAK,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;AAC3D;AACA,KAAK,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,WAAW,CAAC;AACpE;AACA,KAAK,MAAM,KAAK,GAAGA,MAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACnC,KAAK,IAAI,OAAO,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,YAAY,EAAE;AAC9D,MAAM,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC/B,MAAM;AACN;AACA,KAAK,MAAM,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7C,KAAKE,YAAM,CAACC,YAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AAC3B;AACA,KAAKC,sBAAE,CAAC,aAAa,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;AACzC;AACA,KAAK,IAAI,aAAa,KAAK,EAAE,EAAE;AAC/B,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,EAAEJ,MAAI,CAAC,CAAC,CAAC,CAAC;AAC3C,MAAM,MAAM;AACZ,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,EAAEA,MAAI,CAAC,CAAC,CAAC,CAAC;AAC5C,MAAM;AACN,KAAK;AACL,IAAI;AACJ;AACA,GAAG,IAAI,OAAO,EAAE;AAChB,IAAI,MAAM,OAAO,GAAG,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AAC9C;AACA,IAAI,IAAI,KAAK,CAAC;AACd,IAAI,MAAM,OAAO,GAAG,sCAAsC,CAAC;AAC3D;AACA,IAAI,QAAQ,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG;AAC5C,KAAK,IAAI,KAAK,GAAG,EAAE,CAAC;AACpB,KAAK,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAC9B,KAAK,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5B;AACA,KAAK,IAAI,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,MAAM,EAAE;AAChD,MAAM,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AAClC,MAAM,MAAM;AACZ,MAAM,IAAI,OAAO,KAAK,KAAK,EAAE;AAC7B,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;AAClC,OAAO;AACP,MAAM,KAAK,CAAC,IAAI,CAAC,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;AAC5C,MAAM;AACN;AACA,KAAK,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACnC;AACA,KAAK,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AAC/B,MAAM,MAAM,QAAQ,GAAGK,WAAO,CAACL,MAAI,EAAE,IAAI,CAAC,CAAC;AAC3C,MAAM,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,SAAS;AACxC;AACA,MAAM,MAAM,MAAM,GAAGM,SAAK,CAAC,QAAQ,CAAC,CAAC;AACrC;AACA,MAAM,MAAM,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACxE,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,YAAY,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC;AAChE;AACA,MAAM,MAAM,WAAW;AACvB,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAIF,sBAAE,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AACjG,OAAOA,sBAAE,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChD,OAAOA,sBAAE,CAAC,UAAU,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChD,OAAOA,sBAAE,CAAC,UAAU,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;AAC5D;AACA,MAAM,IAAI,WAAW,EAAE,SAAS;AAChC;AACA,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,CAEjB;AACP;AACA,MAAM,MAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AACnC,MAAM;AACN,KAAK;AACL,IAAI;AACJ,GAAG;AACH,EAAE;AACF;AACA,CAAC,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACzE;AACA,CAAC,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AAC9B,EAAE,MAAM,KAAK,CAAC,KAAK,CAAC,CAAC;AACrB,EAAE;AACF;;ACxLe,MAAM,OAAO,CAAC;AAC7B,CAAC,gBAAgB;AACjB,CAAC,aAAa;AACd,CAAC,SAAS;AACV;AACA,CAAC,WAAW,CAAC;AACb,EAAE,eAAe;AACjB,EAAE,YAAY;AACd,EAAE,GAAG;AACL,EAAE,QAAQ;AACV,EAAE,EAAE;AACJ,EAAE,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;AAC1C,EAAE,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;AACpC,EAAE,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;AAC5B;AACA,EAAE,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACjB,EAAE;AACF;AACA,CAAC,iBAAiB,CAAC,IAAI,EAAE;AACzB,EAAEG,UAAI,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AAC3E,EAAE;AACF;AACA,CAAC,iBAAiB,CAAC,IAAI,EAAE;AACzB,EAAEA,UAAI,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AAC3E,EAAE;AACF;AACA,CAAC,iBAAiB,CAAC,IAAI,EAAE;AACzB,EAAEA,UAAI,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AACjC,EAAE;AACF;AACA,CAAC,MAAM,SAAS,CAAC;AACjB,EAAE,KAAK,GAAG,KAAK;AACf,EAAE,IAAI;AACN,EAAE,EAAE;AACJ,EAAE,MAAM,SAAS,CAAC;AAClB,GAAG,GAAG,EAAE,IAAI;AACZ,GAAG,KAAK;AACR,GAAG,GAAG,EAAE,IAAI,CAAC,gBAAgB;AAC7B,GAAG,QAAQ,EAAE,IAAI,CAAC,SAAS;AAC3B,GAAG,GAAG,EAAE,IAAI,CAAC,GAAG;AAChB,GAAG,CAAC,CAAC;AACL,EAAE;AACF;;ACtCO,eAAe,KAAK,CAAC,MAAM,EAAE;AACpC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;AACtB,EAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;AAC1C,EAAE;AACF;AACA,CAAC,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE;AACzC;AACA,EAAE,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;AAC9C,EAAE;AACF;AACA,CAAC,MAAM,GAAG,GAAGC,YAAM,EAAE,CAAC;AACtB;AACA,CAAC,OAAO,CAAC,GAAG,CAACC,UAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE;AACA,CAAC,MAAM,aAAa,GAAGJ,YAAO,CAAC,4BAA4B,CAAC,CAAC;AAC7D;AACA,CAAC,IAAI,CAACK,aAAU,CAAC,aAAa,CAAC,EAAE;AACjC,EAAE,MAAM,IAAI,KAAK,CAAC,gEAAgE,CAAC,CAAC;AACpF,EAAE;AACF;AACA,CAAC,MAAM,QAAQ,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACzC;AACA,CAAC,MAAM,OAAO,GAAG,IAAI,OAAO,CAAC;AAC7B,EAAE,eAAe,EAAE,yBAAyB;AAC5C,EAAE,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM;AACnC,EAAE,QAAQ;AACV,EAAE,GAAG;AACL,EAAE,CAAC,CAAC;AACJ;AACA,CAAC,MAAM,OAAO,GAAGC,0BAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAC1C,CAAC,MAAM,OAAO,CAAC,OAAO,CAAC,CAAC;AACxB;AACA,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACrB;;;;"}